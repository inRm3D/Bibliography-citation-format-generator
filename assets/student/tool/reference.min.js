"use strict";(function(){var n=layui.$,t=layui.form,e=layui.layer,r=layui.laytpl,f=layui.laydate,i={},a={},p=APP.getHeaders("userId"),l=APP.getHeaders("tenantId"),c={},s=null,u=.01,P=false,d=null,o=true,y=null,v=[{}],g=0,A=0,k=null;APP.setJquery(n);var B={addReference:function e(){n("#word-body").html('\n                        <div class="layui-form"  id="verify-word">\n                            <ul class="layui-row layui-col-space5">\n                                <li class="layui-col-md12">\n                                    <ul class="layui-row layui-form-radio-top-0" style="margin-bottom: 5px;border: 1px solid #e2e2e2;border-radius: 4px;padding: 5px 0;">\n                                        <li class="layui-col-md12"><p style="padding: 5px 10px;"><b style="font-size: 20px">参考文献标准类别</b></p></li>\n                                        <li class="layui-col-md6"><input lay-filter="radio-referenceType" name="type" value="1" checked type="radio" title="专著（M、D、R、C、S、G、A）"/></li>\n                                        <li class="layui-col-md6"><input lay-filter="radio-referenceType" name="type" value="2" type="radio" title="专著中的析出文献（M、D、R、C、S、G、A）"/></li>\n                                        \x3c!--<li class="layui-col-md6"><input lay-filter="radio-referenceType" name="type" value="3" type="radio" title="连续出版物（J、N）"/></li>--\x3e\n                                        <li class="layui-col-md12"><input lay-filter="radio-referenceType" name="type" value="4" type="radio" title="连续出版物中的析出文献（J、N）"/></li>\n                                        <li class="layui-col-md6"><input lay-filter="radio-referenceType" name="type" value="5" type="radio" title="专利文献（P）"/></li>\n                                        <li class="layui-col-md6"><input lay-filter="radio-referenceType" name="type" value="6" type="radio" title="电子资源（EB）"/></li>\n                                    </ul>\n                                    <div data-id="referenceTypeWarp" style="min-height: 10px;">\n                                        '+n("#temp-referenceType1").html()+"\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                    ");var a=n("#verify-word");var p=null;var l={};var i=a.find('[data-id="referenceTypeWarp"]').eq(0);var r=new ClipboardJS('[data-id="CopyReferenceTypeVal"]',{text:function e(r){return a.find('[data-id="referenceTypeVal"]').val()}});t.on("radio(radio-referenceType)",function(e){var r=e.value;i.html(n("#temp-referenceType"+r).html());a.find("[data-reference-date]").each(function(e,r){f.render({elem:r,type:"date",trigger:"click"})});t.render()});t.on("submit(referenceType)",function(e){var r=e.field;Object.keys(r).forEach(function(e){return r[e]=r[e].trim()});var i=r.type;setTimeout(function(){var e=B.buildReference["type"+i].call(this,r);a.find('[data-id="referenceTypeVal"]').val(e);p=e;l=r},10);return false});a.find("[data-reference-date]").each(function(e,r){a.find("[data-reference-date]").each(function(e,r){f.render({elem:r,type:"date",trigger:"click"})})});t.render()},buildReference:{verifyOLError:function e(){},type1:function e(r){var i=/[\u4E00-\u9FFF]+/g.test(r.p2);var a=i?"：":": ";var p=i?"．":". ";var l=i?"（":"(";var n=i?"）":")";var t=i?"，":", ";var f="";f+=r.p1;f=f.split(/；|;|、/).filter(function(e){return!APP.isBlank(e)}).map(function(e){return e.trim()}).join(i?"，":", ");f+=p+r.p2;if(!APP.isBlank(r.p3)){f+=a+r.p3}f+="["+r.p4;if(!APP.isBlank(r.p5)){f+="/"+r.p5;if("OL"===r.p5&&APP.isBlank(r.p13)){B.buildReference.verifyOLError()}}f+="]"+p;if(!APP.isBlank(r.p6)){f+=r.p6+p}if(!APP.isBlank(r.p7)){f+=r.p7+p}f+=r.p8;f+=a+r.p9;f+=t+r.p10;if(!APP.isBlank(r.p11)){f+=a+r.p11;if(!APP.isBlank(r.p12)){f+="["+r.p12+"]"}}f+=p;if(i){f=f.replace(/\(/g,"（");f=f.replace(/\)/g,"）");f=f.replace(/,/g,"，");f=f.replace(/: ?/g,"：")}else{f=f.replace(/（/g,"(");f=f.replace(/）/g,")");f=f.replace(/，/g,", ");f=f.replace(/：/g,": ")}if(!APP.isBlank(r.p13)){f+=r.p13+p}if(!APP.isBlank(r.p14)){f+="DOI"+a+r.p14+p}return f},type2:function e(r){var i=/[\u4E00-\u9FFF]+/g.test(r.p2);var a=i?"：":": ";var p=i?"．":". ";var l=i?"（":"(";var n=i?"）":")";var t=i?"，":", ";var f="";f+=r.p1;f=f.split(/；|;|、/).filter(function(e){return!APP.isBlank(e)}).map(function(e){return e.trim()}).join(i?"，":", ");f+=p+r.p2;f+="["+r.p3;if(!APP.isBlank(r.p4)){f+="/"+r.p4;if("OL"===r.p4&&APP.isBlank(r.p15)){this.verifyOLError()}}f+="]";if(!APP.isBlank(r.p5)){f+=p+r.p5}f+="//"+r.p6+p;f+=r.p7;if(!APP.isBlank(r.p8)){f+=a+r.p8}if(!APP.isBlank(r.p)){f+=r.p9}f+=p;f+=r.p10;f+=a+r.p11;f+=t+r.p12;if(!APP.isBlank(r.p13)){f+=a+r.p13;if(!APP.isBlank(r.p14)){f+="["+r.p14+"]"}}f+=p;if(i){f=f.replace(/\(/g,"（");f=f.replace(/\)/g,"）");f=f.replace(/,/g,"，");f=f.replace(/: ?/g,"：")}else{f=f.replace(/（/g,"(");f=f.replace(/）/g,")");f=f.replace(/，/g,", ");f=f.replace(/：/g,": ")}if(!APP.isBlank(r.p15)){f+=r.p15+p}if(!APP.isBlank(r.p16)){f+="DOI"+a+r.p16+p}return f},type3:function e(r){var i=/[\u4E00-\u9FFF]+/g.test(r.p2);var a=i?"：":": ";var p=i?"．":". ";var l=i?"（":"(";var n=i?"）":")";var t=i?"，":", ";var f="";f+=r.p1;f=f.split(/；|;|、/).filter(function(e){return!APP.isBlank(e)}).map(function(e){return e.trim()}).join(i?"，":", ");f+=p+r.p2;if(!APP.isBlank(r.p3)){f+=a+r.p3}f+="["+r.p4;if(!APP.isBlank(r.p5)){f+="/"+r.p5;if("OL"===r.p5&&APP.isBlank(r.p15)){B.buildReference.verifyOLError()}}f+="]"+p;f+=r.p6+(/^\d+/.test(r.p7)?t:"")+r.p7+"-";if(!APP.isBlank(r.p8)){f+=r.p8+(/^\d+/.test(r.p9)?t:"")+r.p9}f+=p;f+=r.p10;f+=a+r.p11;f+=t+r.p12+"-"+r.p13;if(!APP.isBlank(r.p14)){f+="["+r.p14+"]"}f+=p;if(i){f=f.replace(/\(/g,"（");f=f.replace(/\)/g,"）");f=f.replace(/,/g,"，");f=f.replace(/: ?/g,"：")}else{f=f.replace(/（/g,"(");f=f.replace(/）/g,")");f=f.replace(/，/g,", ");f=f.replace(/：/g,": ")}if(!APP.isBlank(r.p15)){f+=r.p15+p}if(!APP.isBlank(r.p16)){f+="DOI"+a+r.p16+p}return f},type4:function e(r){var i=/[\u4E00-\u9FFF]+/g.test(r.p2);var a=i?"：":": ";var p=i?"．":". ";var l=i?"（":"(";var n=i?"）":")";var t=i?"，":", ";var f="";f+=r.p1;f=f.split(/；|;|、/).filter(function(e){return!APP.isBlank(e)}).map(function(e){return e.trim()}).join(i?"，":", ");f+=p+r.p2;if(!APP.isBlank(r.p3)){f+=a+r.p3}f+="["+r.p4;if(!APP.isBlank(r.p5)){f+="/"+r.p5;if("OL"===r.p5&&APP.isBlank(r.p12)){B.buildReference.verifyOLError()}}f+="]"+p;f+=r.p6;if(!APP.isBlank(r.p7)){f+=a+r.p7}f+=t+r.p8+(/^\d+/.test(r.p9)?t:"")+r.p9;if(!APP.isBlank(r.p10)){f+=a+r.p10}if(!APP.isBlank(r.p11)){f+="["+r.p11+"]"}f+=p;if(i){f=f.replace(/\(/g,"（");f=f.replace(/\)/g,"）");f=f.replace(/,/g,"，");f=f.replace(/: ?/g,"：")}else{f=f.replace(/（/g,"(");f=f.replace(/）/g,")");f=f.replace(/，/g,", ");f=f.replace(/：/g,": ")}if(!APP.isBlank(r.p12)){f+=r.p12+p}if(!APP.isBlank(r.p13)){f+="DOI"+a+r.p13+ +p}return f},type5:function e(r){var i=/[\u4E00-\u9FFF]+/g.test(r.p2);var a=i?"：":": ";var p=i?"．":". ";var l=i?"（":"(";var n=i?"）":")";var t=i?"，":", ";var f="";f+=r.p1;f=f.split(/；|;|、/).filter(function(e){return!APP.isBlank(e)}).map(function(e){return e.trim()}).join(i?"，":", ");f+=p+r.p2;f+=a+r.p3;f+="["+r.p4;if(!APP.isBlank(r.p5)){f+="/"+r.p5;if("OL"===r.p5&&APP.isBlank(r.p8)){B.buildReference.verifyOLError()}}f+="]"+p;f+=r.p6;if(!APP.isBlank(r.p7)){f+="["+r.p7+"]"}f+=p;if(i){f=f.replace(/\(/g,"（");f=f.replace(/\)/g,"）");f=f.replace(/,/g,"，");f=f.replace(/: ?/g,"：")}else{f=f.replace(/（/g,"(");f=f.replace(/）/g,")");f=f.replace(/，/g,", ");f=f.replace(/：/g,": ")}if(!APP.isBlank(r.p8)){f+=r.p8+p}if(!APP.isBlank(r.p9)){f+="DOI"+a+r.p9+p}return f},type6:function e(r){var i=/[\u4E00-\u9FFF]+/g.test(r.p2);var a=i?"：":": ";var p=i?"．":". ";var l=i?"（":"(";var n=i?"）":")";var t=i?"，":", ";var f="";f+=r.p1;f=f.split(/；|;|、/).filter(function(e){return!APP.isBlank(e)}).map(function(e){return e.trim()}).join(i?"，":", ");f+=p+r.p2;if(!APP.isBlank(r.p3)){f+=a+r.p3}f+="["+r.p4;if(!APP.isBlank(r.p5)){f+="/"+r.p5;if("OL"===r.p5&&APP.isBlank(r.p12)){B.buildReference.verifyOLError()}}f+="]"+p;if(!APP.isAllBlank(r.p6,r.p7,r.p8)){f+=r.p6+a+r.p7+t+r.p8}if(!APP.isBlank(r.p9)){f+=a+r.p9}if(!APP.isBlank(r.p10)){f+=l+r.p10+n}if(!APP.isBlank(r.p11)){f+="["+r.p11+"]"}f+=p;if(i){f=f.replace(/\(/g,"（");f=f.replace(/\)/g,"）");f=f.replace(/,/g,"，");f=f.replace(/: ?/g,"：")}else{f=f.replace(/（/g,"(");f=f.replace(/）/g,")");f=f.replace(/，/g,", ");f=f.replace(/：/g,": ")}if(!APP.isBlank(r.p12)){f+=r.p12+p}if(!APP.isBlank(r.p13)){f+="DOI"+a+r.p13+p}return f}}};B.addReference()})();