"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var d="/";try{var e=document.getElementsByTagName("script");for(var t in e){var a=e[t],n=a.src;if(n&&n.indexOf("/assets/js/")>-1){d=n.split("/assets/js/")[0];break}}}catch(e){console.error(e)}var i=function e(){var g=this,y=layui.$||jQuery;var a=location.protocol.indexOf("s:")!=-1?"s":"";var t=/(lun51\.com)$/;var n=location.hostname+(/(lun51\.com)$/.test(location.hostname)?"/logic":"");var i=location.hostname+(/(lun51\.com)$/.test(location.hostname)?"/logic":"");var r=location.hostname+(/(lun51\.com)$/.test(location.hostname)?"/logic":"");var s=location.hostname+(/(lun51\.com)$/.test(location.hostname)?"/logic":"");var o=/(lun51\.com)$/.test(location.hostname)?"file-server.lun51.com":location.hostname;var l=location.hostname+(/(lun51\.com)$/.test(location.hostname)?"/logic":"");var u=/(lun51\.com)$/.test(location.hostname)?"lun51.com":"192.168.2.3:8080";var c=location.hostname+(/(lun51\.com)$/.test(location.hostname)?"/logic":"");var f=["studentDocCheckRequest$tenant$","OvO_tenantId","historyMenu","is_chairman","is_college","menu_scroll_top_lun51admin","rememberUser","SIGN-OUT-HOME"];g.limit=30;g.limits=[10,20,30,40,50,60,70,90];g.limits1=[10,20,30,90,150,200,250,300,500];g.limit2=100;g.limits2=[100,200,500,700,900];g.limit3=1e3;g.limits3=[1e3,1500,2e3,2500,3e3];g.limit4=50;g.limits4=[5,10,15,20,25,30,50,150,200,250,300,350,400,450,500];g.layerMaxHeight=function(){return window.innerHeight-26};g.degree={doctor:"博士",master:"硕士",bachelor:"学士",college:"专科"};g.lun51DefaultSonicOption={width:150,height:150,stepsPerFrame:1,trailLength:1,pointDistance:.01,fps:70,fillColor:"#068144",step:function e(t,a){this._.beginPath();this._.moveTo(t.x,t.y);this._.arc(t.x,t.y,a*7,0,Math.PI*2,false);this._.closePath();this._.fill()},path:[["arc",75,75,50,0,360]]};g.restfulPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+n+e};g.freeDocTemplateIds={"3151_general":1};g.accountPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+i+e};g.systemPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+r+e};g.docPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+s+e};g.filePrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+o+e};g.checkFilePrefix=function(e){e=/^\//.test(e)?e:"/"+e;var t=location.hostname;return"http"+a+"://"+(/(lun51\.com)$/.test(t)?"file-server.lun51.com":t)+e};g.thesisFilePrefix=function(e){e=/^\//.test(e)?e:"/"+e;var t=location.hostname;return"http"+a+"://"+t+(/(lun51\.com)$/.test(t)?"/logic":"")+e};g.wsPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"ws"+a+"://"+c+e};g.newsPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+l+e};g.shortUrlPrefix=function(e){e=/^\//.test(e)?e:"/"+e;return"http"+a+"://"+u+e};g.scienceNum=function(e){var t="";if(typeof e==="number"){t=e.toString()}else if(typeof e==="string"){t=e}else{return e}var a=/(?=(?!\b)(\d{3})+$)/g;return t.replace(a,",")};g.isHideReportDownloadBtnStudent=function(){var a=false;var e=g.getHeaders("tenantId");if(!e||"lun51"===e.toLowerCase()){return a}g.ajax({url:g.accountPrefix("/account/um_customer/is-hide-check-report-download-btn/student"),type:"post",async:!1,offLayerLoad:1,success:function e(t){if(t.code==0&&t.data===true){a=true}}});return a};g.serverDatetime=function(){var a=null;if(!y.ajax){return(new Date).getTime()}g.ajax({url:"/apis/server-datetime",data:{},async:false,success:function e(t){a=t},error:function e(){a=(new Date).getTime()}});return a};g.serverDate=function(){return new Date(g.serverDatetime())};g.padStart=function(e,t,a){if(e.length>=t){return e}else{var n=[];for(var i=e.length;i<t;++i){n.push(a)}n.push(e);return n.join("")}};g.includes=function(e,t){if(!(e instanceof Array||typeof e==="string")){return false}return e.includes(t)};g.log=console.log;g.err=console.error;g.getTenantThesisInfo=function(e,t){var a={};g.ajax({url:g.thesisFilePrefix("/thesis/data/all/thesis-info"),async:false,data:{tenantId:e,onlyName:t,isAjax:true},success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a};g.queryDecodeParam=function(e){var t=location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"));if(t){return g.getDecodeURI(t[2])}return null};g.queryNotDecodeParam=function(e){var t=location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"));if(t){return t[2]}return null};g.getEncodeURI=function(e){return encodeURIComponent(e)};g.getDecodeURI=function(e){return decodeURIComponent(e)};g.createGetUrl=function(e,t){if(!e){return""}if(!t){return e}var a=[];y.each(t,function(e,t){a.push(e+"="+g.getEncodeURI(t))});var n=a.join("&");if(e.indexOf("?")===-1){return e+"?"+n}else{return e+"&"+n}};g.strText=function(e){if(/^(-?\d+)(\.\d+)?$/.test(e)){return e}if(!e||e=="null"){return""}return(e+"").replace(new RegExp('"',"gm"),"&quot;").replace(new RegExp("<","gm"),"&lt;").replace(new RegExp(">","gm"),"&gt;")};g.getObjVal=function(e,t,a){var n=null;if(!(typeof e==="undefined"||(typeof e==="undefined"?"undefined":_typeof(e))!=="object"||typeof e[t]==="undefined")){n=e[t]}return a?n==null?"":n:n};g.equals=function(e,t){if(typeof e=="undefined"||typeof t=="undefined"){return false}if((typeof e==="undefined"?"undefined":_typeof(e))!=(typeof t==="undefined"?"undefined":_typeof(t))){return false}return e===t};g.equalsIgnoreCase=function(e,t){if(typeof e=="undefined"||typeof t=="undefined"){return false}if(e===t){return true}if((typeof e==="undefined"?"undefined":_typeof(e))!==(typeof t==="undefined"?"undefined":_typeof(t))){return false}return e.toUpperCase()===t.toUpperCase()};g.equal=function(e,t){if(typeof e=="undefined"||typeof t=="undefined"){return false}return e==t};g.getDateTime=function(e){if(!e)return 0;if(e instanceof Date)return e.getTime();if(typeof e==="number")return e;var t=g.parseDate(e);return!t?0:t.getTime()};g.getBaseUrl=function(e){var t="/";var a=document.getElementsByTagName("script");for(var n in a){var i=a[n].src;if(i&&i.indexOf("assets/js/app.")!=-1){t=i.split("assets/js/app.")[0];break}}t=t.replace(/\/+$/,"/");if(typeof e==="undefined"){return t}else{if(/^https?:\/\//.test(e)){return e}else{if(/\/$/.test(t)){t=t.replace(/\/+$/,"")}e=e.replace(/^\/+/,"/");t+=/^\/+/.test(e)?e:"/"+e;return t}}};g.compareDate=function(e,t){var a=new Date(e.replace(/-/g,"/"));var n=new Date(t.replace(/-/g,"/"));if(a.getTime()>=n.getTime()){return true}return false};g.uuid=function(e,t){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");var n=[],i;t=t||a.length;if(e){for(i=0;i<e;i++){n[i]=a[0|Math.random()*t]}}else{var r;n[8]=n[13]=n[18]=n[23]="-";n[14]="4";for(i=0;i<36;i++){if(!n[i]){r=0|Math.random()*16;n[i]=a[i==19?r&3|8:r]}}}return n.join("")};g.formatSeconds=function(e){var t=parseInt(e);var a=0;var n=0;if(t>60){a=parseInt(t/60);t=parseInt(t%60);if(a>60){n=parseInt(a/60);a=parseInt(a%60)}}return(n>0?n+"小时":"")+(a>0?a+"分钟":"")+(t>0?t+"秒":"")};g.continuousNumberFormat=function(e){if(g.isEmpty(e)){return""}var t=e.sort(function(e,t){return e*1-t*1});var a=0;var n="";var i=t.length;for(var r=0;r<i;r++){if(r===i-1){a=2}if(a===0){if(t[r+1]===t[r]+1){n+=""+t[r];n+="-";a=1}else{n+=""+t[r];n+=","}}else if(a===1){if(t[r+1]!==t[r]+1){n+=""+t[r];n+=",";a=0}}else{n+=""+t[r]}}return n};g.random=function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);break;case 2:return parseInt(Math.random()*(t-e+1)+e,10);break;default:return 0;break}};g.listPage=function(e,t,a){var n=[];if(!e||e.length==0||t<1){return n}var i=e.length;var r=parseInt(i/t);var s=r+(i%t>0?1:0);for(var o=0;o<s;o++){var l=e.slice(0,t);e=e.slice(t);if(a)a(o,l);n.push(n)}return n};g.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;){}};g.asyncEach=function(t,a,n,e,i){if(e){e()}var r=t[0];setTimeout(function(){n(r);var e=t.slice(1);if(e&&e.length>0){g.asyncEach(e,a,n,null,i)}else if(i){i()}},a)};g.asyncExec=function(e,t){t=typeof t==="undefined"?350:t;t=t<0?0:t;setTimeout(function(){e()},t)};g.underlineToHump=function(e){return e.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()})};g.humpToUnderline=function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()};g.parseDate=function(e){if(e instanceof Date){return e}if(typeof e==="string"){e=e.replace(/\-/g,"/").replace("年","/").replace("月","/").replace("日","");return new Date(e)}return new Date(e)};g.fileSizeUnitConvert=function(e){if(!e){return"未知"}else if(1024>e){return e+"B"}else if(1024*1024>e){return(e/1024).toFixed(2)+"KB"}else if(1024*1024*1024>e){return(e/(1024*1024)).toFixed(2)+"MB"}else{return(e/(1024*1024*1024)).toFixed(2)+"GB"}};g.existFile=function(e,a){g.ajax({url:e,data:{isExist:1},success:function e(t){if(t==="Y"){if(a){a()}}else{layui.layer.msg("不存在或已清除")}},error:function e(){layui.layer.msg("请求异常，稍后再试")}})};g.downloadExistFile=function(r){var s=r.url,o=r.fileName;var l=g.filePrefix("/file_server/download/");if(!/^http(s)?:\/\//.test(s)){layui.use("layer",function(){layui.layer.msg("文件不存在或已删除")});return}if(/^https:\/\/lun51-data.lun51.com:18002\/v20210325/.test(s)){s=s.replace("https://lun51-data.lun51.com:18002/v20210325/","https://lun51-data.lun51.com:18002/")}layui.use("layer",function(){layui.layer.load(1,{time:-1});g.ajax({url:l,async:!1,data:{isExist:1,httpUrl:s},success:function e(t){layui.layer.closeAll("loading");if(t!="Y"){layui.layer.msg("文件不存在或已删除")}else{var a=/^http(s)?:\/\/[a-z0-9\-]+\.lun51\.com/.exec(s);var n=l;if(a&&s.indexOf("www.lun51.com")===-1){var i=s.indexOf("lun51-data-003.lun51.com")!==-1;if(i){s=s.replace(":18003/",":18003/lun51-res-03/")}if(/^http(s)?:\/\/[a-z0-9\-]+\.lun51\.com/.test(s)){s=s.replace(/^http(s)?:\/\/lun51-data\.lun51\.com/,s.split("://")[0]+"://172.26.170.4");s=s.replace(/^http(s)?:\/\/lun51-data-002\.lun51\.com/,s.split("://")[0]+"://172.26.170.5");s=s.replace(/^http(s)?:\/\/lun51-data-003\.lun51\.com/,s.split("://")[0]+"://172.26.170.5")}}g.downloadFile2({url:n,data:{fileName:o,httpUrl:s,loginKey:g.getHeaders("loginKey")}});if(r.success){setTimeout(function(){r.success()},1e3)}}},error:function e(){layui.layer.closeAll("loading");layui.layer.msg("文件不存在或已删除")}})})};g.downloadFile=function(e,t){if(layui&&layui.layer){layui.layer.load(1,{time:1e3*5})}try{var a=e;var n=document.createElement("iframe"),i=(new Date).getTime();if(a.indexOf("?")>-1){a+="&t="+i}else{a+="?t="+i}n.id="IFR-ID-"+i;n.src=a;n.style.display="none";document.body.appendChild(n)}catch(e){}};g.downloadFile2=function(i){i.url=/^http(s)?:\/\//.test(i.url)?i.url:g.accountPrefix(i.url);layui.use("layer",function(){var e=i.layerLoadTime;e=!e?1e3*30:e;e=e>1e3*10?1e3*10:e;layui.layer.load(1,{time:e});try{var t=i.type?i.type.toLowerCase():"get";var a=y('<form action="'+i.url+'" style="display: none;" method="'+t+'">\n                        <input type="hidden" name="t" value="'+(new Date).getTime()+'"/>\n                    </form>');y("body").append(a);var n=y.extend({},i.data);y.each(n,function(e,t){a.append(y('<input type="hidden" name="'+e+'"/>').val(t))});if(i.url&&i.url.indexOf("loginKey=")===-1){if(!("loginKey"in n)){a.append(y('<input type="hidden" name="loginKey"/>').val(g.getHeaders("loginKey")))}}a.trigger("submit");a.remove()}catch(e){console.error(e)}})};g.buildReqParams=function(e){var t=[];for(var a in e){var n={name:a};var i=e[a];if(i===null||i===undefined){continue}if((typeof i==="undefined"?"undefined":_typeof(i))==="object"&&"value"in i){n.jsonValue=JSON.stringify(i.value);n.columnName=i.columnName;n.compareToName=i.compareToName;n.orName=i.orName;n.orColumnName=i.orColumnName;n.type=i.type;n.clazz=i.clazz}else{n.jsonValue=JSON.stringify(i)}t.push(n)}return t};g.buildReqParamsToJson=function(e){return JSON.stringify(g.buildReqParams(e))};g.formDataFilter=function(e,t){var a={};if(typeof e==="undefined"||e===null){return a}for(var n in e){var i=e[n];if(i!=undefined){i=typeof i==="string"?i.trim():i;if(t&&t.call(this,n,i)){a[n]=i}else if(!t&&i!==""){a[n]=i}}}return a};g.setJquery=function(e){y=e};g.getJquery=function(){return y};g.storage={set:function e(t,a){(g.isWAP()?localStorage:sessionStorage).setItem(t,a)},get:function e(t){return(g.isWAP()?localStorage:sessionStorage).getItem(t)},del:function e(t){(g.isWAP()?localStorage:sessionStorage).removeItem(t)},clear:function e(){var t=g.isWAP()?localStorage:sessionStorage;var a=t.length;for(var n=0;n<a;n++){var i=t.key(n);if(f.indexOf(i)===-1){t.removeItem(i)}}}};g.clearCookie=function(e){var t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t){var a=t.length;var n=new Date;n.setTime(n.getTime()-1);for(var i=a;i--;){var r=t[i];if(e===true||f.indexOf(r)===-1){document.cookie=r+"=0; expire="+n.toUTCString()+"; path=/"}}}};g.clearCache=function(e){if(e===true){localStorage.clear();sessionStorage.clear()}else{try{var t=localStorage.length;for(var a=0;a<t;a++){var n=localStorage.key(a);if(f.indexOf(n)===-1){localStorage.removeItem(n)}}sessionStorage.clear();g.clearCookie()}catch(e){console.error(e)}}};g.ajax=function(e){var t=e["url"],a=e["data"];if(!/^http(s*):\/\/[\S]/.test(t)){t=g.restfulPrefix(t)}var n=null;var i=e.offLayerLoad;delete e.offLayerLoad;if(!i){if(e.layerLoadTime){n=(layer||layui.layer).load(1,{time:e.layerLoadTime});delete e.layerLoadTime}else{n=(layer||layui.layer).load(1,{time:1e3})}}e["type"]=(e["type"]||"GET").toUpperCase();var r=g.getHeaders(e);var s=r["loginKey"];if(t.indexOf("loginKey")==-1){if(a instanceof Object){a["loginKey"]=s;a["vt"]=(new Date).getTime()}else{t+=t.indexOf("?")>-1?"&":"?";t+="loginKey="+g.getEncodeURI(s)}}e["url"]=t;if(!e.xhrFields){e.xhrFields={withCredentials:true}}if(!e.error){e.error=function(){layui.use("layer",function(){layui.layer.closeAll("loading");layui.layer.confirm("请求异常，稍后再试",{skin:"layui-layer-molv",btn:["确认"]},function(e,t){layui.layer.close(e)})})}}if("success"in e){var o=e.success;delete e.success;e.success=function(e){g.isLogout(e,o);(layer||layui.layer).close(n)}}y.ajax(e)};g.isOnline=function(e){g.ajax({offLayerLoad:true,type:"post",url:"/account/um_user/is-online"+(e?"?loginKey="+e:"")})};g.loadTransparentShade=function(){return(layer||layui.layer).open({type:1,area:[0,0],title:0,closeBtn:0,shade:.01})};g.readLine=function(e,a){var n=this;if(e instanceof Array){if(a){e.forEach(function(e,t){a.call(n,t,e)})}return e}if(typeof e!="string"){return[]}if(e===undefined||e===null||e.trim()===""){return[]}var t=e.split("\n");if(a){var i=t.length;for(var r=0;r<i;r++){a.call(this,r,t[r],i)}}return t};g.isLogout=function(e,t){if((typeof e==="undefined"?"undefined":_typeof(e))==="object"&&"code"in e){if(e.code==101){var a=(g.getHeaders("tenantId")||"").toLowerCase();g.clearCache();if("jwc.cqrz"===a){location.replace("http://uia.cqrz.edu.cn/cas/logout?service=http%3A%2F%2Fuia.cqrz.edu.cn%2Fcas%2Flogin%3Fservice%3Dhttp%253A%252F%252Fsso.lun51.com%252Fsso%252Ftenant%252Fauth%252Fcqrz%252Fjwc");return false}var n=localStorage.getItem("SIGN-OUT-HOME");if(n!=null){location.replace(n)}else{location.replace(d+"/login.html?v=202203141157")}return false}else{"function"==typeof t&&t(e)}}else{"function"==typeof t&&t(e)}};g.userInfo=function(e){var t=g.isWAP()?localStorage:sessionStorage;var a=t.length;var n={};for(var i=0;i<a;i++){var r=t.key(i);if(r.indexOf("account_")!=-1){var s=r.replace("account_","");s=g.underlineToHump(s);n[s]=t.getItem(r)}}return e===undefined?n:n[e]};g.getHeaders=function(e){var t=null,a=null;if(typeof e==="string"){t={};a=e}else if((typeof e==="undefined"?"undefined":_typeof(e))==="object"){t=e}else{t={}}var n=t["headers"]=t["headers"]||{};n["loginKey"]=g.storage.get("account_login_key");n["tenantId"]=g.storage.get("account_tenant_id");n["userId"]=g.storage.get("account_id");n["seq"]=g.storage.get("account_seq")*1;try{n["Lun51UserAgent"]=navigator.userAgent}catch(e){}return a===null?n:n[a]};g.getTenantInfo=function(e){var a={};g.ajax({url:"/system/tenant/"+e+"/",async:false,success:function e(t){if(t.code==0){a=t.data}}});return a};g.mapSort=function(i,r){var s=this;if(g.isEmpty(i)){return i}var t={};Object.keys(i).sort(function(e,t){var a={k:e,v:i[e]};var n={k:t,v:i[t]};return r.call(s,a,n)}).forEach(function(e){t[e]=i[e]});return t};g.mapEach=function(a,n){var i=this;if(g.isEmpty(a)){return}Object.keys(a).forEach(function(e,t){n.call(i,a[e],e,t)})};g.isEnablePay=function(){var e=g.storage.get("account_tenant_id");if(!e){return false}var t=g.storage.get("account_enable_in_pay");return e.toLowerCase()=="lun51"||t==1};g.ajaxDownload=function(i){if(typeof i==="string"){i={url:i}}if(!i||!i.url){throw new Error("URL cannot be empty")}var r=this;r.option=i;r.postDataFormat=function(e){if((typeof e==="undefined"?"undefined":_typeof(e))!="object"){console.error("输入的参数必须是对象");return}if(e instanceof FormData){return e}if(typeof FormData=="function"){var t=new FormData;for(var a in e){t.append(a,e[a])}return t}else{var n=new Array;var i=0;for(var a in e){n[i]=encodeURIComponent(a)+"="+encodeURIComponent(e[a]);i++}return n.join("&")}};r.send=function(){if(!r.option.data){r.xhr.send("")}else{r.xhr.send(r.postDataFormat(r.option.data))}};r._successFn=i.success;r._errorFn=i.error;r._progressFn=i.progress;r._loadstartFn=i.loadstart;var e=r.xhr=new XMLHttpRequest;e.open(i.type?i.type.toUpperCase():"GET",i.url,true);e.withCredentials=!!i.credentials;e.responseType="blob";e.onloadstart=function(){typeof r._loadstartFn=="function"&&r._loadstartFn()};if(i.headers){var t=i.headers;for(var a in t){e.setRequestHeader(a,t[a])}t=g.getHeaders();for(var n in t){e.setRequestHeader(n,t[n])}}else{var s=g.getHeaders();for(var o in s){e.setRequestHeader(o,s[o])}}e.onload=function(){if(this.status>=200&&this.status<300){if(this.response.type.indexOf("json")!=-1){var t=new FileReader;t.readAsText(this.response,"utf-8");t.onload=function(){var e=JSON.parse(t.result);layui.use("layer",function(){layui.layer.closeAll("loading");g.openTip(layui.layer,'<div style="padding: 20px">'+e.msg+"</div>")})};return}var e=i.fileName||(this.getAllResponseHeaders().indexOf("filename=")>-1?this.getAllResponseHeaders().split("filename=")[0].split("\n")[0].split(";")[0]:i.url.split("#")[0].split("/").pop());var a=new Blob([this.response],{type:this.response.type});if(window.navigator.msSaveOrOpenBlob){navigator.msSaveBlob(a,e)}else{var n=document.createElement("a");n.href=window.URL.createObjectURL(a);n.download=e;n.click();window.URL.revokeObjectURL(n.href)}typeof r._successFn=="function"&&r._successFn(a)}else if(this.status==404){typeof r._errorFn=="function"&&r._errorFn({code:404,msg:"附件链接失效了"})}else{typeof r._errorFn=="function"&&r._errorFn({code:500,msg:"下载错误"})}};e.onprogress=function(e){var t=e.loaded;var a=e.total;if(this.state!=4&&t<=a){typeof r._progressFn=="function"&&r._progressFn({total:a,loaded:t,percent:Math.floor(100*t/a)})}};r.send();return r};g.ajaxDownload.prototype={get state(){return this.xhr.readyState},abort:function e(){this.xhr.abort()}};g.openTip=function(n,e,i,t){if((typeof i==="undefined"?"undefined":_typeof(i))==="object"){t=i;i=undefined}if(typeof e==="function"){i=e}if(typeof n==="string"){e=n;n=layui.layer}t=t||{};return n.open(y.extend({},t,{type:1,offset:"auto",title:"信息提示",id:"layerDemo-"+(new Date).getTime(),content:e,btn:"确认",skin:"layui-layer-green p-0",btnAlign:"c",area:g.isWAP()?"320px":"900px",shade:.5,scrollbar:false,yes:function e(t,a){n.close(t);if(i instanceof Function){i(t,a)}}}))};g.tips=function(e,t,a){if((typeof t==="undefined"?"undefined":_typeof(t))==="object"){a=t;t=undefined}else if(typeof t!=="function"){}g.openTip(layer||layui.layer,'<div style="padding: 20px;min-width:320px">'+e+"</div>",t,a)};g.isBlank=function(e){if(e===undefined||e===null){return true}if(typeof e!=="string"){return false}return e.trim().length===0};g.isAllBlank=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++){t[a]=arguments[a]}var n=t.length;for(var i=0;i<n;i++){if(!g.isBlank(t[i])){return false}}return true};g.isEmpty=function(e){if(typeof e==="undefined"||e==null){return true}if(typeof e==="string"||e instanceof Array){return e.length===0}if(typeof e==="number"||typeof e==="boolean"){return false}if(e instanceof Array){return e.length===0}if(e instanceof Object){return Object.keys(e).length===0}return false};g.ajaxUpload=function(r){r["async"]=typeof r["async"]!=="undefined"?r["async"]:true;var i=g.random(80,97);var e=r["url"],t=r["data"];if(!/^http(s*):\/\/[\S]/.test(e)){e=g.restfulPrefix(e)}y.ajax({type:"post",url:e,data:t,headers:g.getHeaders(r),processData:!1,contentType:!1,async:r["async"],dataType:"json",xhr:function e(){if(r["progress"]instanceof Function){var e=y.ajaxSettings.xhr();if(e.upload){e.upload.addEventListener("progress",function(e){var t=e.loaded;var a=e.total;var n=Math.floor(100*t/a);n=n>=i?i:n;r["progress"]({total:a,loaded:t,percent:n})});return e}}},success:r["success"],error:function e(t,a,n,i){if(r["error"]instanceof Function){r["error"](t,a,n,i)}else{g.tips("请求异常了哦，请您稍后再试，如有疑问可联系网站客服。")}}})};g.ajaxUploadAndProgress=function(r){r["async"]=typeof r["async"]!=="undefined"?r["async"]:true;var i=g.random(80,97);var e=r["url"],t=r["data"],s=r.file,a=r.autoCloseProgress;delete r.file;var o=layer||layui.layer;if(!/^http(s*):\/\/[\S]/.test(e)){e=g.filePrefix(e)}var l="uploadProgress"+(new Date).getTime();var n=g.uploadProgress(o,l,s.name,0,s.size);y.ajax({type:"post",url:e,data:t,headers:g.getHeaders(r),processData:!1,contentType:!1,async:r["async"],dataType:"json",xhr:function e(){var e=y.ajaxSettings.xhr();if(e.upload){e.upload.addEventListener("progress",function(e){var t=e.loaded;var a=e.total;var n=Math.floor(100*t/a);n=n>=i?i:n;g.uploadProgress(o,l,s.name,n,s.size)});return e}},success:function e(t){if(a){o.close(n)}r.success.call(this,t,n)},error:function e(t,a,n,i){y("#"+l+"_PROGRESS_STATE").addClass("color-red").html("上传异常咯，可联系网站客服帮忙处理哦 ~");y("#"+l+"_PROGRESS_BAR").removeClass("lun51-progress-big-animation").find(".layui-progress-bar").removeClass("layui-bg-green").addClass("layui-bg-red");if(r["error"]instanceof Function){r["error"](t,a,n,i)}}})};g.getFileExt=function(e){if(e==null){return null}e=e.split("?")[0];return e.substring(e.lastIndexOf("."))};g.toJson=function(e){return JSON.stringify(e)};g.parseJson=function(e,t){if(g.isBlank(e)){return{}}if(!isNaN(e)&&typeof e==="string"){return JSON.parse(e)}if(!/^(\{)|(\[)|(")/.test(e)){return t}try{return JSON.parse(e)}catch(e){if(typeof t==="undefined"){return t}throw e}};g.parseArrayJson=function(e,t){if(g.isBlank(e)){return[]}try{return JSON.parse(e)}catch(e){if(typeof t==="undefined"){return t}throw e}};g.copyData=function(e){if(!e){return e}return JSON.parse(JSON.stringify(e))};g.arrayToDistinct=function(e){if(e instanceof Array){return Array.from(new Set(e))}return e};g.downloadProgress=function(e,t,a,n,i,r){var s=null;var o=y("#"+t+"_PROGRESS_BAR");if(!o[0]){s=e.open({id:"LAYER_ID"+t,title:"下载进度",type:1,area:g.isWAP()?"90%":"840px",skin:"layui-layer-green p-0",anim:5,scrollbar:false,resize:false,closeBtn:1,content:'\n                     <div class="p-20">\n                     <p class="m-b-15"><span class="color-gray">文件名称：</span>'+a+'</p>\n                     <p class="m-b-15"><span class="color-gray">文件大小：</span>'+g.fileSizeUnitConvert(i)+'</p>\n                     \n                     <p class="m-b-15"><span class="color-gray">下载状态：</span><span id="'+t+'_PROGRESS_STATE">'+(n<100?"正在加载中...":"加载已完成，正在保存...")+'</span></p>\n                     <div class="layui-progress layui-progress-big lun51-progress-big lun51-progress-big-animation m-b-15" id="'+t+'_PROGRESS_BAR">\n                        <div class="layui-progress-bar layui-bg-green" ><span class="layui-progress-text">0%</span></div>\n                     </div>\n                     </div>\n                '});o=y("#"+t+"_PROGRESS_BAR")}o.find(".layui-progress-bar").css("width",n+"%").html('<span class="layui-progress-text">'+(n+"%")+"</span>");if(n>=100){y("#"+t+"_PROGRESS_STATE").html("加载已完成，正在保存...")}if(r){y("#"+t+"_PROGRESS_STATE").html("下载已完成");o.removeClass("lun51-progress-big-animation")}return s};g.uploadProgress=function(e,t,a,n,i){var r=null;var s=y("#"+t+"_PROGRESS_BAR");if(!s[0]){r=e.open({id:"LAYER_ID"+t,title:"上传进度",type:1,area:g.isWAP()?"90%":"840px",skin:"layui-layer-green  p-0",anim:5,scrollbar:false,resize:false,closeBtn:1,content:' \n                    <div class="p-20">\n                     <p class="m-b-15">文件上传中，请不要关闭浏览器</p>\n                     <p class="m-b-15"><span class="color-gray">文件名称：</span>'+a+'</p>\n                     <p class="m-b-15"><span class="color-gray">文件大小：</span>'+g.fileSizeUnitConvert(i)+'</p>\n                     \n                     <p class="m-b-15"><span class="color-gray">上传状态：</span><span id="'+t+'_PROGRESS_STATE">'+(n<100?"正在上传中...":"上传已完成")+'</span></p>\n                     <div class="layui-progress layui-progress-big lun51-progress-big lun51-progress-big-animation m-b-15" id="'+t+'_PROGRESS_BAR">\n                        <div class="layui-progress-bar layui-bg-green" ><span class="layui-progress-text">0%</span></div>\n                     </div>\n                     </div>\n                '});s=y("#"+t+"_PROGRESS_BAR")}s.find(".layui-progress-bar").css("width",n+"%").html('<span class="layui-progress-text">'+(n+"%")+"</span>");if(n>=100){y("#"+t+"_PROGRESS_STATE").html("上传已完成");s.removeClass("lun51-progress-big-animation")}return r};g.getLayerProgressIndex=function(e){var t=y("#LAYER_ID"+e);if(t[0]){return t.closest(".layui-layer").attr("times")*1}return null};g.closeLayerProgress=function(e){(layer||layui.layer).close(g.getLayerProgressIndex(e))};g.editor=function(e,f){var p={},d=e.layer,m=e.form,t="";if(f&&f[0]){y('.lun51-editor-tool > [type="face"]').off("click.editor").on("click.editor",function(){var e="",t=this,a=p.faces,n="lun51-editface-"+g.uuid();for(var i in a){e+='<li title="'+i+'"><img src="'+a[i]+'"></li>'}e='<ul id="'+n+'" class="layui-clear">'+e+"</ul>";d.tips(e,t,{tips:3,time:0,skin:"layui-edit-face"});y(document).on("click",function(){d.closeAll("tips")});y("#"+n).on("click","li",function(){var e=y(this).attr("title")+" ";p.focusInsert(f[0],"face"+e)});event.stopPropagation()});y('.lun51-editor-tool > [type="picture"]').off("click.editor").on("click.editor",function(){var i=(new Date).getTime();d.open({type:1,id:"fly-jie-upload",title:"插入图片",shade:false,area:"470px",skin:"layui-layer-green",content:['<ul class="layui-form layui-form-pane" lay-filter="uploadImages-'+i+'">','<li class="layui-form-item">','<label class="layui-form-label">URL</label>','<div class="layui-input-inline">','<input required name="image" placeholder="支持直接粘贴远程图片地址" value="" class="layui-input">',"</div>",'<input required type="file" name="file" class="layui-upload-file" accept="image/jpeg,image/png,image/gif" value="">','<label class="layui-btn layui-btn-primary uploadImg" ><i class="layui-icon">&#xe67c;</i>上传图片</label>',"</li>",'<li class="layui-form-item">格式仅支持 .png、.jpg、.gif，文件小于 500KB</li>','<li class="layui-form-item">Chrome 浏览器支持截图粘贴哦 ~ </li>','<li class="layui-form-item" style="text-align: center;">','<hr/><button type="button" lay-submit lay-filter="uploadImages-'+i+'" class="layui-btn">确认</button>',"</li>",'<li class="layui-form-item" style="text-align: center;height: 100px;"><img show-img style="max-width: 100%;height: 100px;" /></li>',"</ul>"].join(""),success:function e(l,a){var s=null;var o=null;var n=0;var u=l.find('input[name="image"]');var t=l.find(".uploadImg");t.on("click",function(){t.prev('input[name="file"]').change(function(){var e=this;if(this.value){if(!/((\.PNG)|(\.JPG)|(\.JPEG)|(\.GIF))$/.test(this.value.toUpperCase())){d.msg("图片格式错误");return}var t=this.files[0].size;if(t>1024*500+50){d.msg("图片太大");return}if(n===t){return}n=t;var a=new FormData;y("#upload-box").addClass("layui-hide");y("#upload-progress").removeClass("layui-hide");a.append("file",this.files[0]);a.append("tenant_id",g.storage.get("account_tenant_id")||"lun51");a.append("user_id",g.storage.get("account_id")||"lun51_upload_file");a.append("sys_file_upload_config_seq","17");g.ajax({type:"post",url:g.filePrefix("/file_server/upload/img"),data:a,processData:false,contentType:false,dataType:"json",success:function e(t){if(t.code==0){o=t.data.src;u.val(o);l.find("img[show-img]").attr("src",o)}else{d.msg(t.msg)}}})}else{y(this).before('<input required type="file" name="file" class="layui-upload-file" accept="image/jpeg,image/png,image/gif" value="">').remove()}})[0].click()});m.on("submit(uploadImages-"+i+")",function(e){var t=e.field;if(!t.image)return u.focus();if(!/^http(s*):\/\/[\S]/.test(t.image)){d.tips("这根本不是个图片地址，不要骗我。",u,{tips:1});return}p.focusInsert(f[0],"\nimg["+t.image+"] \n");d.close(a)});u.on("paste",function(e){var t=false;if(e.clipboardData||e.originalEvent){var a=e.clipboardData||e.originalEvent.clipboardData;if(a&&a.items&&a.items.length>0){var n=a.items,i=n.length,r=null;for(var s=0;s<i;s++){if(n[s].type.indexOf("image")!==-1){e.preventDefault();t=true;r=n[s].getAsFile()}}if(r!==null){var o=new FileReader;o.onload=function(e){var t=e.target.result;c({file:t,isChrome:true,success:function e(t){u.val(t);l.find("img[show-img]").attr("src",t)}})};o.readAsDataURL(r)}}}setTimeout(function(){if(!t&&/^https?:\/\//.test(u.val())){l.find("img[show-img]").attr("src",u.val())}},30)});function c(e){var a=e.file;var n=e.isChrome||false;var i=e.targetImg;var r=e.success;if(s&&s===a){if(i){i["data-paste"]=true}if(r){r.call(this,o)}return}if(/https?:\/\//.test(a)){if(i){i["data-paste"]=true}if(r){r.call(this,a)}return}var t={};t.file=a;t.fileName="xx.png";t.tenantId=g.getHeaders("tenantId");t.userId=g.getHeaders("userId");t.sysFileUploadConfigSeq=17;g.ajax({url:g.filePrefix("/file_server/upload/img/base64"),type:"post",data:t,success:function e(t){if(t.code==0){s=a;o=t.data;if(!n&&i){i["data-paste"]=true;i.src=o}if(r){r.call(this,o)}}else{g.tips(t.msg)}}})}}})});y('.lun51-editor-tool > [type="href"]').off("click.editor").on("click.editor",function(){d.prompt({title:"请输入合法链接",skin:"layui-layer-green",shade:false,content:'<input type="text" style="width: 470px" class="layui-input layui-layer-input" placeholder="http://www.lun51.com"/>'},function(e,t,a){if(!/^http(s*):\/\/[\S]/.test(e)){d.tips("这根本不是个链接，不要骗我。",a,{tips:1});event.stopPropagation();return}p.focusInsert(f[0]," a("+e+")["+e+"] ");d.close(t)})});y('.lun51-editor-tool > [type="code"]').off("click.editor").on("click.editor",function(){d.prompt({title:"请贴入代码",skin:"layui-layer-green",formType:2,maxlength:1e4,shade:.5,area:["860px","390px"]},function(e,t,a){p.focusInsert(f[0],"[pre]\n"+e+"\n[/pre]");d.close(t)})});y('.lun51-editor-tool > [type="hr"]').off("click.editor").on("click.editor",function(){p.focusInsert(f[0],"[hr]")});y('.lun51-editor-tool > [type="file"]').off("click.editor").on("click.editor",function(){var r=(new Date).getTime();d.open({type:1,id:"fly-jie-upload",title:"文件共享",shade:false,area:"650px",skin:"layui-layer-green",content:['<ul class="layui-form layui-form-pane" lay-filter="uploadImages-'+r+'">','<li class="layui-form-item">','<label class="layui-form-label">URL</label>','<div class="layui-input-inline">','<input required name="file-show" readonly value="" class="layui-input" placeholder="请选择文件">',"</div>",'<input required type="file" name="file" class="layui-upload-file" value="">','<label class="layui-btn layui-btn-primary uploadFile" ><i class="layui-icon">&#xe67c;</i>上传文件</label>',"</li>",'<li class="layui-form-item">目前仅支持 doc,docx,zip 格式文件; 文件大小<10M</li>','<li class="layui-form-item" style="text-align: center;">','<hr/><button type="button" lay-submit lay-filter="uploadFile-'+r+'" class="layui-btn">确认</button>',"</li>",'<li class="layui-form-item layui-form-text" style="text-align: center;height: 150px;"  hidden>','<textarea name="fileShareMsg" class="layui-textarea" style="height: 100%"></textarea>',"</li>","</ul>"].join(""),success:function e(t,a){m.render();m.on("submit(uploadFile-"+r+")",function(e){if(e.field.fileShareMsg===""){d.tips("请选择分享文件")}p.focusInsert(f[0],e.field.fileShareMsg);d.close(a)});var n=0;var i=t.find(".uploadFile");i.on("click",function(){i.prev('input[name="file"]').change(function(){if(this.value){if(!/((\.DOC)|(\.DOCX)|(\.ZIP))$/.test(this.value.toUpperCase())){d.msg("文件格式错误");return}var e=this.files[0].size;if(e>1024*1024*10+50){d.msg("文件过大，需<10M");return}if(n===e){return}else{n=e}var t=new FormData;y("#upload-box").addClass("layui-hide");y("#upload-progress").removeClass("layui-hide");t.append("file",this.files[0]);t.append("tenant_id",g.storage.get("account_tenant_id")||"lun51");t.append("user_id",g.storage.get("account_id")||"lun51_upload_file");t.append("sys_file_upload_config_seq","17");g.ajax({type:"post",url:g.filePrefix("/file_server/upload/"),data:t,processData:false,contentType:false,dataType:"json",success:function e(t){if(t.code==0){var a=t.data.userId;var n=t.data.fileName;var i=t.data.fileSize;var r=t.data.inHttpUrl;var s="LUN51给您发送了共享了文件\n"+"文件名:"+n+"\n"+"下载链接:"+r+"\n"+"请及时下载文件保存，以免超出共享时间，系统自动清除";y('[name="file-show"]').val(n);y('[name="fileShareMsg"]').val(s);y('[name="fileShareMsg"]').parent().eq(0).show()}else{d.msg(t.msg)}}})}else{y(this).before('<input required type="file" name="file" class="layui-upload-file" value="">').remove()}})[0].click()})}})});y('.lun51-editor-tool > [type="yulan"]').off("click.editor").on("click.editor",function(){var e=f.val();e=/^\{html\}/.test(e)?e.replace(/^\{html\}/,""):p.content(e);d.open({type:1,title:"预览",skin:"layui-layer-green",area:["100%","100%"],scrollbar:false,content:""+e})});p.value=function(){return f.val()};p.htmlCode=function(){return/^\{html\}/.test(p.value())?content.replace(/^\{html\}/,""):p.content(p.value())}}p.htmlCode=function(e){return/^\{html\}/.test(e)?content.replace(/^\{html\}/,""):p.content(e)};p.faces={"[微笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5c/huanglianwx_thumb.gif","[嘻嘻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0b/tootha_thumb.gif","[哈哈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6a/laugh.gif","[可爱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/14/tza_thumb.gif","[可怜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/kl_thumb.gif","[挖鼻]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0b/wabi_thumb.gif","[吃惊]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f4/cj_thumb.gif","[害羞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/shamea_thumb.gif","[挤眼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c3/zy_thumb.gif","[闭嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/29/bz_thumb.gif","[鄙视]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/71/bs2_thumb.gif","[爱你]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/lovea_thumb.gif","[泪]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9d/sada_thumb.gif","[偷笑]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/19/heia_thumb.gif","[亲亲]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/8f/qq_thumb.gif","[生病]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/b6/sb_thumb.gif","[太开心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/58/mb_thumb.gif","[白眼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/landeln_thumb.gif","[右哼哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/98/yhh_thumb.gif","[左哼哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/zhh_thumb.gif","[嘘]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a6/x_thumb.gif","[衰]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/af/cry.gif","[委屈]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/73/wq_thumb.gif","[吐]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9e/t_thumb.gif","[哈欠]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/cc/haqianv2_thumb.gif","[抱抱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/27/bba_thumb.gif","[怒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7c/angrya_thumb.gif","[疑问]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/5c/yw_thumb.gif","[馋嘴]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a5/cza_thumb.gif","[拜拜]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/70/88_thumb.gif","[思考]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e9/sk_thumb.gif","[汗]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/24/sweata_thumb.gif","[困]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/kunv2_thumb.gif","[睡]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/96/huangliansj_thumb.gif","[钱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/90/money_thumb.gif","[失望]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/0c/sw_thumb.gif","[酷]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/cool_thumb.gif","[色]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/20/huanglianse_thumb.gif","[哼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/49/hatea_thumb.gif","[鼓掌]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/36/gza_thumb.gif","[晕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/dizzya_thumb.gif","[悲伤]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1a/bs_thumb.gif","[抓狂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/62/crazya_thumb.gif","[黑线]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/91/h_thumb.gif","[阴险]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6d/yx_thumb.gif","[怒骂]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/60/numav2_thumb.gif","[互粉]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/89/hufen_thumb.gif","[心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/hearta_thumb.gif","[伤心]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ea/unheart.gif","[猪头]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/58/pig.gif","[熊猫]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/6e/panda_thumb.gif","[兔子]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/81/rabbit_thumb.gif","[ok]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d6/ok_thumb.gif","[耶]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/ye_thumb.gif","[good]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d8/good_thumb.gif","[NO]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/ae/buyao_org.gif","[赞]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d0/z2_thumb.gif","[来]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/come_thumb.gif","[弱]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d8/sad_thumb.gif","[草泥马]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7a/shenshou_thumb.gif","[神马]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/60/horse2_thumb.gif","[囧]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/15/j_thumb.gif","[浮云]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bc/fuyun_thumb.gif","[给力]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/1e/geiliv2_thumb.gif","[围观]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f2/wg_thumb.gif","[威武]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/70/vw_thumb.gif","[奥特曼]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/bc/otm_thumb.gif","[礼物]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/c4/liwu_thumb.gif","[钟]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d3/clock_thumb.gif","[话筒]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/9f/huatongv2_thumb.gif","[蜡烛]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/d9/lazhuv2_thumb.gif","[蛋糕]":"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/3a/cakev2_thumb.gif"};p.content=function(e){var t=function e(t){return new RegExp("\\["+(t||"")+"(pre|div|table|thead|th|tbody|tr|td|ul|li|ol|li|dl|dt|dd|h2|h3|h4|h5)\\]\\n*","g")};e=p.escape(e||"").replace(/img\[([^\s]+?)\]/g,function(e){return'<img src="'+e.replace(/(^img\[)|(\]$)/g,"")+'">'}).replace(/@(\S+)(\s+?|$)/g,'@<a href="javascript:;" class="fly-aite">$1</a>$2').replace(/face\[([^\s\[\]]+?)\]/g,function(e){var t=e.replace(/^face/g,"");return'<img alt="'+t+'" title="'+t+'" src="'+p.faces[t]+'">'}).replace(/a\([\s\S]+?\)\[[\s\S]*?\]/g,function(e){var t=(e.match(/a\(([\s\S]+?)\)\[/)||[])[1];var a=(e.match(/\)\[([\s\S]*?)\]/)||[])[1];if(!t)return e;var n=/^(http(s)*:\/\/)\b(?!(\w+\.)*(sentsin.com|layui.com))\b/.test(t.replace(/\s/g,""));return'<a href="'+t+'" target="_blank"'+(n?' rel="nofollow"':"")+">"+(a||t)+"</a>"}).replace(t(),"<$1>").replace(t("/"),"</$1>").replace(/\n/g,"<br>").replace(/\[hr\]/g,"<hr>");return e};p.escape=function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};p.focusInsert=function(e,t){var a,n=e.value;e.focus();if(document.selection){a=document.selection.createRange();document.selection.empty();a.text=t}else{a=[n.substring(0,e.selectionStart),t,n.substr(e.selectionEnd)];e.focus();e.value=a.join("")}};return p};g.getTenantIdByHostName=function(){var e=location.hostname;if(e.indexOf(".lun51.com")>-1&&e!="www.lun51.com"){return e.replace(/\.lun51\.com$/,"")}return"lun51"};g.isWAP=function(){var e=navigator.userAgent.toLowerCase();var t=e.match(/ipad/i)=="ipad";var a=e.match(/iphone os/i)=="iphone os";var n=e.match(/midp/i)=="midp";var i=e.match(/rv:1.2.3.4/i)=="rv:1.2.3.4";var r=e.match(/ucweb/i)=="ucweb";var s=e.match(/android/i)=="android";var o=e.match(/windows ce/i)=="windows ce";var l=e.match(/windows mobile/i)=="windows mobile";return t||a||n||i||r||s||o||l};g.table={fixedLeft:g.isWAP()?"":"left",fixedRight:g.isWAP()?"":"right"};g.isWeiXin=function(){var e=navigator.userAgent.toLowerCase();if(e.match(/MicroMessenger/i)=="micromessenger"){return true}else{return false}};g.getDataTable=function(e,t,a){var n=e.table.cache[t]||[];if(typeof a!=="undefined"){for(var i in n){if(i==a)return n[i]}}return n};g.updateDataTable=function(e,t,a,n){var i=g.getDataTable(e,t,a);Object.keys(n).forEach(function(e){if(e in i){i[e]=n[e]}});return i};g.updateDataTableObj=function(e,t,a){var n=t.tr.eq(0).attr("data-index")*1;var i=g.updateDataTable(layui,e,n,a);if(t&&typeof t.update==="function"){t.update(i)}};g.compareTo=function(e,t){if(!e&&!t){return 0}else if(!e){return-1}else if(!t){return 1}var a=e+"";var n=t+"";var i=a.length;var r=n.length;var s=Math.min(i,r);var o=[];var l=[];for(var u=0;u<i;u++){o.push(a.charCodeAt(u))}for(var c=0;c<i;c++){l.push(n.charCodeAt(c))}var f=0;while(f<s){var p=o[f];var d=l[f];if(p!=d){return p-d}f++}return i-r};g.weekRangeDate=function(e){var t=new Date(e.Format("YYYY/MM/dd")),a=null;var n=t.getTime(),i=null;var r=t.getDay();if(r===0){i=n;n=n-1e3*60*60*24*6}else{n=n-1e3*60*60*24*(r-1);i=n+1e3*60*60*24*6}t=new Date(n);a=new Date(i);return[t,a]};g.currDayDatetimeRange=function(){var e=new Date;var t=new Date(e.Format("yyyy/MM/dd")).getTime();var a=e.getTime();return[t,a]};g.toDayDatetimeRange=function(e){e=g.parseDate(e);var t=new Date(e.Format("yyyy/MM/dd")).getTime();var a=e.getTime();return[t,a]};g.isColleteMajorLinkage=function(){var e=localStorage.getItem("thesisProcessParam");if(!e){return false}e=JSON.parse(e);if(!("COLLETE_MAJOR_LINKAGE_SZ"in e)){return false}e=e["COLLETE_MAJOR_LINKAGE_SZ"];return e["enabled"]===1};g.tenantByTotalCheckTemplateShow=function(e){var t={enabled:false,templateIds:[]};if(!e||e.toLowerCase()==="lun51"){return t}var a=localStorage.getItem("thesisProcessParam");if(!a){return t}a=JSON.parse(a);if(!("TOTAL_CHECK_TEMPLATE_SHOW_SZ"in a)){return t}a=a["TOTAL_CHECK_TEMPLATE_SHOW_SZ"];if(a.enabled===1){t.enabled=true;if(a.templateId){t.templateIds=a.templateId.split(",")}}return t};g.docCheckLoadDatetimeToHMS=function(e,t){if(e!=null){var a=(new Date).getTime()-new Date(e.replace(/-/g,"/")).getTime(),n=0,i=0,r=0;n=parseInt(a/(1e3*60*60));a=a%(1e3*60*60);i=parseInt(a/(1e3*60));a=a%(1e3*60);r=parseInt(a/1e3);var s="";s+=n>0?n+"时 ":"";s+=i>0?i+"分 ":"";s+=r>0?r+"秒 ":"";return t?'<div style="color: #FFF;background-color:#'+(n>0||i>=15?"963a1c":i>=10?"FF5722":"009688")+'">'+s+"</div>":s}else{return" "}};g.getObjKeysVal=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++){a[n-1]=arguments[n]}if(!e||!a){return e}var i=null;var r=e;var s=a.length;var o=0;for(var l=0;l<s;l++){o+=1;i=r[a[l]];if(!i){break}else{r=i}}return o===s?i:null};g.rangeArray=function(e,t){var a=[];for(var n=e;n<t;n++){a.push(n)}return a};g.arrHasVal=function(e,t){var a=false;if(!e||!t)return a;for(var n in e){a=t(e[n]);if(a)return true}return false};g.tableAutoRowHeight=function(e){if(!y('style[lay-lay-auto-row-height-id="'+e+'"]')[0]){y("head").eq(0).append('<style lay-auto-row-height-id="'+e+'">[lay-id="'+e+'"] .layui-table-cell{vertical-align:middle;height:auto;overflow:visible;text-overflow:inherit;white-space:normal;word-break:break-all}</style>')}var a=y('[lay-id="'+e+'"]').eq(0);a.find(".layui-table-main tr").each(function(e,t){y(a.find(".layui-table-fixed-l .layui-table-body tbody tr")[e]).height(y(t).height());y(a.find(".layui-table-fixed-r .layui-table-body tbody tr")[e]).height(y(t).height())});var t=a.find(".layui-table-header tr").eq(0).height();a.find(".layui-table-fixed-l .layui-table-header thead tr").height(t);a.find(".layui-table-fixed-r .layui-table-header thead tr").height(t);var n=a.height()-80-(t-39);a.find(".layui-table-main").height(n);a.off("mousedown.tableAutoRowHeight").on("mousedown.tableAutoRowHeight",function(){a.attr("data-is-mousedown",1)});a.off("mouseup.tableAutoRowHeight").on("mouseup.tableAutoRowHeight",function(){a.attr("data-is-mousedown",0)});y("body").off("mousemove.tableAutoRowHeight_"+e).on("mousemove.tableAutoRowHeight_"+e,function(){if(a.attr("data-is-mousedown")==="1"){a.find(".layui-table-main tr").each(function(e,t){y(a.find(".layui-table-fixed-l .layui-table-body tbody tr")[e]).height(y(t).height());y(a.find(".layui-table-fixed-r .layui-table-body tbody tr")[e]).height(y(t).height())});t=a.find(".layui-table-header tr").eq(0).height();a.find(".layui-table-fixed-l .layui-table-header thead tr").height(t);a.find(".layui-table-fixed-r .layui-table-header thead tr").height(t);n=a.height()-80-(t-39);a.find(".layui-table-main").height(n)}})};g.verifyPassword=function(e){if(!e||e.length<8){return false}var t=0;if(/[\da-zA-Z]+/.test(e)){if(/\d+/.test(e)){t++}if(/[a-z]+/.test(e)){t++}if(/[A-Z]+/.test(e)){t++}if(/[!@*$\-_()+=&￥]+/.test(e)){t++}}return t>=3};g.verifyId=function(e,t,a){var n=layui.layer;var i=true;if(t.length==0){n.msg("账号不能为空");return false}if(t.length<2||t.length>20){n.msg("账号为2-20个字符");return false}if(!/^[\w\d_]{2,20}$/.test(t)){n.msg("账号由字母、数字、下划线组合，2-20个字符");return false}if(a){g.ajax({url:"/account/um_user/is_register_id/",type:"get",data:{tenant_id:e,id:t},async:false,success:function e(t){if(t.code!=0){n.msg(t.msg);i=false}}})}return i};g.queryThesisProcessParam=function(e,t){var a="thesisProcessParam_"+e;var n=localStorage.getItem(a);if(!n&&/^\{.*\}$/.test(n)){return JSON.parse(n)}else{n={};g.ajax({url:"/thesis/thesis-process-param?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:e})},async:!t?false:true,success:function e(t){if(t.code==0){layui.each(t.data,function(e,t){n[t["paramId"]]=t})}else{g.tips(t.msg)}}});localStorage.setItem(a,JSON.stringify(n));return n}};g.tenantListQueryDefaultCurrGraduateEnabled=function(e){var t=g.queryThesisProcessParam(e,false);var a=g.getObjKeysVal(t,"LIST_QUERY_CURR_GRADUATE_SZ","enabled");return typeof a==="undefined"||a===null||a===1};g.tenant_base_query={college:function e(t){var a=[];if(!t||typeof t!=="string"){return a}g.ajax({url:"/thesis/tenant-college?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:t})},async:false,success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a},department:function e(t){var a=[];if(!t||typeof t!=="string"){return a}g.ajax({url:"/thesis/tenant-department?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:t})},async:false,success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a},graduate:function e(t){var a=[];if(!t||typeof t!=="string"){return a}g.ajax({url:"/thesis/tenant-graduation?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:t})},async:false,success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a},major:function e(t){var a=[];if(!t||typeof t!=="string"){return a}g.ajax({url:"/thesis/topic/major?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:t})},async:false,success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a},grade:function e(t){var a=[];if(!t||typeof t!=="string"){return a}g.ajax({url:"/thesis/tenant-grade?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:t})},async:false,success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a},admin_class:function e(t){var a=[];if(!t||typeof t!=="string"){return a}g.ajax({url:"/thesis/tenant-class?isPage=false",data:{params:g.buildReqParamsToJson({tenantId:t})},async:false,success:function e(t){if(t.code==0){a=t.data}else{g.tips(t.msg)}}});return a},student_encipher_check:function e(t){var a={enabled:0,tips:""};if(typeof t!=="string"||"lun51"===t.toLowerCase()){return a}else{g.ajax({url:"/doc/check_tenant_param/student/encipher-check",data:{tenantId:t},type:"post",async:false,success:function e(t){if(t.code==0&&t.data){a.enabled=t.data.enabled===1?1:0;a.tips=t.data.tips}}});return a}}};if(g.isWAP()){var p=document.getElementsByTagName("html")[0];p.setAttribute("class",(p.getAttribute("class")||"").replace("wap","")+" wap")}if(g.getTenantIdByHostName()==="lun51"){y(".not-lun51-hide").removeClass("not-lun51-hide")}layui.use(["layer"],function(){var e=layui.layer;y=layui.$;y("body").off("click.lcdsx-item").on("click.lcdsx-item",".lcdsx-item",function(){e.msg("这个功能使用还须要等待一些时间")})});if(g.isEnablePay()){y(".student-menu-integral").removeClass("layui-hide")}y(document).on("click","[data-pwd-eye]",function(){var e=y(this);var t=e.attr("data-pwd-eye")==="hide";var a=e.attr("data-pwd-for");e.attr("data-pwd-eye",t?"show":"hide");var n=y("#"+a);if(n[0]){n.attr("type",t?"password":"text")}});setTimeout(function(){layui.use("jquery",function(){if(location.href.indexOf("/test/")==-1&&location.href.indexOf("/page/")==-1&&location.href.indexOf("doc_check_report_chars.html")==-1){var e=g.isWAP()?"mqqwpa://im/chat?chat_type=wpa&uin=235690025&version=1&src_type=web&web_src=lun51.com":"tencent://message/?uin=235690025&Site=论无忧&Menu=yes";layui.$("body").append('\n                          <ul class="layui-fixbar lun51" style="bottom: 80px">\n                                <li title="微信扫码，联系企业微信客服">\n                                    <a href="javascript:;" style="color: inherit"><img src="/data/img/kf/qywx-icon.jpg?v=202203141157" style="display: block"/></a>\n                                    <div class="bar-info" style="background-color: #FFF">\n                                        <img src="/data/img/kf/qywx.jpg?v=202203141157" style="display: block" />\n                                        <div style="background-color: #FFF;color: #333;text-align: center;font-size: 12px">微信扫码，联系企业微信客服</div>\n                                    </div>\n                                </li>\n                           </ul>\n                    ')}})},1e3*2)};window.APP=new i;window.addEventListener("load",function(){if(layui){if(layui.element){layui.element.init()}if(layui.$){layui.use("layer",function(){layui.$("body").on("click","[layer-close]",function(){try{var e=layui.$(this).closest("div.layui-layer");if(e[0]&&e.attr("id")){layui.layer.close(e.attr("id").replace(/[^0-9]/g,""))}}catch(e){}})});window.APP.setJquery(layui.$);layui.$(".wap .header-menu").on("click",function(){var e=layui.$(this),t=layui.$(".wap .header-bar");e.toggleClass("this");t.css("display",e.hasClass("this")?"block":"none")});if(layui.$("#menu-nav .menu-nav-toggle-show")[0]){layui.$("#menu-nav .menu-nav-toggle-show").on("click",function(){var e=layui.$(this),t=layui.$("#menu-nav");e.toggleClass("this");e.html('<i class="layui-icon">&#xe60'+(e.hasClass("this")?3:2)+";</i>");t.toggleClass("this")})}if(window.APP.isWAP()){layui.$("#toggleMenuNav").trigger("click")}try{if(/^https:\/\/[0-9A-Za-z]*.lun51.com(\/)?[a-zA-Z0-9]*$/.test(location.href)||(location.href+"").indexOf("lun51.com/index.html")>-1||(location.href+"").indexOf("login.html")>-1){layui.$.getJSON(d+"/data/lun51-data.json?t="+(new Date).getTime(),function(e){if(e&&e.updateData&&e.updateData.is){layui.use("layer",function(){layui.layer.confirm(e.updateData.msg,{title:"网站升级提示",skin:"layui-layer-green",btn:["知道了"],closeBtn:false})})}})}}catch(e){console.log(e)}}}})})();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t=this.length;for(var a=0;a<t;a++){if(this[a]===e){return a}}return-1}}if(!Array.prototype.remove){Array.prototype.remove=function(e){try{var t=this.indexOf(e);if(t>-1){this.splice(t,1)}}catch(e){console.log(e)}return this}}if(!String.prototype.underlineToHump){String.prototype.underlineToHump=function(){return this.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()})}}if(!String.prototype.humpToUnderline){String.prototype.humpToUnderline=function(){return this.replace(/([A-Z])/g,"_$1").toLowerCase()}}